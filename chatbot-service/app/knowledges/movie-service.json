{"openapi":"3.1.0","info":{"title":"movie-service","description":"Movie Service API for Cinema Booking System","version":"1.0.0"},"paths":{"/api/v1/movies/":{"get":{"tags":["movies"],"summary":"Get Movies","description":"Get paginated list of movies with advanced filtering and sorting\n\n**Public endpoint** - No authentication required\n\n- **page**: Page number (starts from 1)\n- **page_size**: Number of items per page (max 100)\n- **sort_by**: Field to sort by (rating, released_year, meta_score, etc.)\n- **sort_order**: asc or desc\n- **search**: Full-text search in title, overview, director, genre\n- **genre**: Filter by genre (partial match)\n- **year**: Filter by exact release year\n- **min_rating**: Filter movies with rating >= this value","operationId":"get_movies_api_v1_movies__get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"},{"name":"sort_by","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Field to sort by","title":"Sort By"},"description":"Field to sort by"},{"name":"sort_order","in":"query","required":false,"schema":{"type":"string","pattern":"^(asc|desc)$","description":"Sort order","default":"desc","title":"Sort Order"},"description":"Sort order"},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Full-text search query","title":"Search"},"description":"Full-text search query"},{"name":"genre","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by genre","title":"Genre"},"description":"Filter by genre"},{"name":"year","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by year","title":"Year"},"description":"Filter by year"},{"name":"min_rating","in":"query","required":false,"schema":{"anyOf":[{"type":"number","maximum":10,"minimum":0},{"type":"null"}],"description":"Minimum IMDB rating","title":"Min Rating"},"description":"Minimum IMDB rating"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse_MovieResponse_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["movies"],"summary":"Create Movie","description":"Create new movie with validation\n\n**Admin only**\n\nValidations:\n- series_title and overview are required\n- released_year must be between 1900-2030\n- imdb_rating must be between 0-10\n- meta_score must be between 0-100\n- runtime must be > 0","operationId":"create_movie_api_v1_movies__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MovieCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MovieResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/movies/search":{"get":{"tags":["movies"],"summary":"Search Movies","description":"Simple search movies by title, director, or overview\n\n**Public endpoint** - No authentication required\n\n- **q**: Search query (required)\n- **limit**: Maximum number of results to return (max 50, default 10)\n\nReturns a list of movies matching the search query.\nFor more advanced search with pagination, use the GET / endpoint with search parameter.","operationId":"search_movies_api_v1_movies_search_get","parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":1,"description":"Search query","title":"Q"},"description":"Search query"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"description":"Maximum number of results","default":10,"title":"Limit"},"description":"Maximum number of results"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MovieResponse"},"title":"Response Search Movies Api V1 Movies Search Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/movies/{movie_id}":{"get":{"tags":["movies"],"summary":"Get Movie","description":"Get movie by ID\n\n**Public endpoint** - No authentication required","operationId":"get_movie_api_v1_movies__movie_id__get","parameters":[{"name":"movie_id","in":"path","required":true,"schema":{"type":"integer","title":"Movie Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MovieResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["movies"],"summary":"Update Movie","description":"Update existing movie\n\n**Admin only**","operationId":"update_movie_api_v1_movies__movie_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"movie_id","in":"path","required":true,"schema":{"type":"integer","title":"Movie Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MovieUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MovieResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["movies"],"summary":"Delete Movie","description":"Delete movie by ID\n\n**Admin only**","operationId":"delete_movie_api_v1_movies__movie_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"movie_id","in":"path","required":true,"schema":{"type":"integer","title":"Movie Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/movies/stats/overview":{"get":{"tags":["movies"],"summary":"Get Dashboard Overview","description":"Get overall dashboard statistics\n\n**Authentication required** - User hoặc Admin\n\nReturns:\n- Total movies, directors, genres\n- Average rating and meta score","operationId":"get_dashboard_overview_api_v1_movies_stats_overview_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardStats"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/movies/stats/by-genre":{"get":{"tags":["movies"],"summary":"Get Stats By Genre","description":"Get statistics by genre\n\n**Authentication required** - User hoặc Admin\n\nReturns list of genres with:\n- Number of movies\n- Average rating","operationId":"get_stats_by_genre_api_v1_movies_stats_by_genre_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/GenreStats"},"type":"array","title":"Response Get Stats By Genre Api V1 Movies Stats By Genre Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/movies/stats/top-directors":{"get":{"tags":["movies"],"summary":"Get Top Directors","description":"Get top directors by average rating\n\n**Authentication required** - User hoặc Admin\n\nReturns directors with:\n- Number of movies\n- Average rating\n- Total votes\n\nOnly includes directors with at least 2 movies","operationId":"get_top_directors_api_v1_movies_stats_top_directors_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"description":"Number of directors to return","default":10,"title":"Limit"},"description":"Number of directors to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DirectorStats"},"title":"Response Get Top Directors Api V1 Movies Stats Top Directors Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/movies/stats/by-year":{"get":{"tags":["movies"],"summary":"Get Movies Per Year","description":"Get number of movies per year\n\n**Authentication required** - User hoặc Admin\n\nUseful for timeline charts","operationId":"get_movies_per_year_api_v1_movies_stats_by_year_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/YearStats"},"type":"array","title":"Response Get Movies Per Year Api V1 Movies Stats By Year Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/movies/stats/rating-distribution":{"get":{"tags":["movies"],"summary":"Get Rating Distribution","description":"Get IMDB rating distribution histogram\n\n**Authentication required** - User hoặc Admin\n\nReturns count of movies in ranges: 0-1, 1-2, ..., 9-10","operationId":"get_rating_distribution_api_v1_movies_stats_rating_distribution_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/RatingDistribution"},"type":"array","title":"Response Get Rating Distribution Api V1 Movies Stats Rating Distribution Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/movies/stats/meta-score-distribution":{"get":{"tags":["movies"],"summary":"Get Meta Score Distribution","description":"Get Meta Score distribution histogram\n\n**Authentication required** - User hoặc Admin\n\nReturns count of movies in ranges: 0-10, 10-20, ..., 90-100","operationId":"get_meta_score_distribution_api_v1_movies_stats_meta_score_distribution_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/RatingDistribution"},"type":"array","title":"Response Get Meta Score Distribution Api V1 Movies Stats Meta Score Distribution Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"DashboardStats":{"properties":{"total_movies":{"type":"integer","title":"Total Movies"},"total_directors":{"type":"integer","title":"Total Directors"},"total_genres":{"type":"integer","title":"Total Genres"},"avg_rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Rating"},"avg_meta_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Meta Score"}},"type":"object","required":["total_movies","total_directors","total_genres","avg_rating","avg_meta_score"],"title":"DashboardStats","description":"Dashboard statistics"},"DirectorStats":{"properties":{"director":{"type":"string","title":"Director"},"movie_count":{"type":"integer","title":"Movie Count"},"avg_rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Rating"},"total_votes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Votes"}},"type":"object","required":["director","movie_count","avg_rating","total_votes"],"title":"DirectorStats","description":"Director statistics"},"GenreStats":{"properties":{"genre":{"type":"string","title":"Genre"},"count":{"type":"integer","title":"Count"},"avg_rating":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Rating"}},"type":"object","required":["genre","count","avg_rating"],"title":"GenreStats","description":"Statistics by genre"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"MovieCreate":{"properties":{"poster_link":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Poster Link"},"series_title":{"type":"string","maxLength":255,"minLength":1,"title":"Series Title","description":"Title is required"},"released_year":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Released Year"},"certificate":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Certificate"},"runtime":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Runtime"},"genre":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Genre"},"imdb_rating":{"anyOf":[{"type":"number","maximum":10.0,"minimum":0.0},{"type":"null"}],"title":"Imdb Rating"},"overview":{"type":"string","minLength":1,"title":"Overview","description":"Overview is required"},"meta_score":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"Meta Score"},"director":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Director"},"star1":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Star1"},"star2":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Star2"},"star3":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Star3"},"star4":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Star4"},"no_of_votes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"No Of Votes"},"gross":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gross"}},"type":"object","required":["series_title","overview"],"title":"MovieCreate"},"MovieResponse":{"properties":{"poster_link":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Poster Link"},"series_title":{"type":"string","maxLength":255,"minLength":1,"title":"Series Title"},"released_year":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Released Year"},"certificate":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Certificate"},"runtime":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Runtime"},"genre":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Genre"},"imdb_rating":{"anyOf":[{"type":"number","maximum":10.0,"minimum":0.0},{"type":"null"}],"title":"Imdb Rating"},"overview":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Overview"},"meta_score":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"Meta Score"},"director":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Director"},"star1":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Star1"},"star2":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Star2"},"star3":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Star3"},"star4":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Star4"},"no_of_votes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"No Of Votes"},"gross":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gross"},"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["series_title","id","created_at","updated_at"],"title":"MovieResponse"},"MovieUpdate":{"properties":{"poster_link":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Poster Link"},"series_title":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Series Title"},"released_year":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Released Year"},"certificate":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Certificate"},"runtime":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Runtime"},"genre":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Genre"},"imdb_rating":{"anyOf":[{"type":"number","maximum":10.0,"minimum":0.0},{"type":"null"}],"title":"Imdb Rating"},"overview":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Overview"},"meta_score":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"Meta Score"},"director":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Director"},"star1":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Star1"},"star2":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Star2"},"star3":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Star3"},"star4":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Star4"},"no_of_votes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"No Of Votes"},"gross":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gross"}},"type":"object","title":"MovieUpdate"},"PaginatedResponse_MovieResponse_":{"properties":{"items":{"items":{"$ref":"#/components/schemas/MovieResponse"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"total_pages":{"type":"integer","title":"Total Pages"},"has_next":{"type":"boolean","title":"Has Next"},"has_prev":{"type":"boolean","title":"Has Prev"}},"type":"object","required":["items","total","page","page_size","total_pages","has_next","has_prev"],"title":"PaginatedResponse[MovieResponse]"},"RatingDistribution":{"properties":{"rating_range":{"type":"string","title":"Rating Range"},"count":{"type":"integer","title":"Count"}},"type":"object","required":["rating_range","count"],"title":"RatingDistribution","description":"Rating distribution"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"YearStats":{"properties":{"year":{"type":"string","title":"Year"},"count":{"type":"integer","title":"Count"}},"type":"object","required":["year","count"],"title":"YearStats","description":"Movies per year statistics"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}